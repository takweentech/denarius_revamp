<!-- Stats -->
<section>
  <div class="row g-2">
    <div class="col-md-12 col-lg-6 col-xl-3">
      <div
        class="card stats-card bg-white py-3 px-3 d-flex align-items-center flex-row gap-3 h-100"
      >
        <div class="icon success">
          <img src="assets/icons/Saudi_Riyal_Symbol-d.svg" alt="" />
        </div>

        <div class="d-flex flex-column gap-1">
          <span>Total Deposit</span>
          <span class="fw-semibold"
            >{{ user.financialSummary.totalDeposits }}
            <img src="assets/icons/Saudi_Riyal_Symbol-d.svg" alt=""
          /></span>
        </div>
      </div>
    </div>
    <div class="col-md-12 col-lg-6 col-xl-3">
      <div
        class="card stats-card bg-white py-3 px-3 d-flex flex-row align-items-center gap-3 h-100"
      >
        <div class="icon danger">
          <img src="assets/icons/invoice-dollar.svg" alt="" />
        </div>

        <div class="d-flex flex-column gap-1">
          <span>Total Investments</span>
          <span class="fw-semibold"
            >{{ user.financialSummary.totalInvestments }}
            <img src="assets/icons/Saudi_Riyal_Symbol-d.svg" alt=""
          /></span>
        </div>
      </div>
    </div>
    <div class="col-md-12 col-lg-6 col-xl-3">
      <div
        class="card stats-card bg-white py-3 px-3 d-flex flex-row align-items-center gap-3 h-100"
      >
        <div class="icon primary">
          <img src="assets/icons/earnings.svg" alt="" />
        </div>

        <div class="d-flex flex-column gap-1">
          <span>Total Earnings</span>
          <span class="fw-semibold"
            >{{ user.financialSummary.totalProfits }}
            <img src="assets/icons/Saudi_Riyal_Symbol-d.svg" alt=""
          /></span>
        </div>
      </div>
    </div>
    <div class="col-md-12 col-lg-6 col-xl-3">
      <div
        class="card stats-card bg-white py-3 px-3 d-flex flex-row align-items-center gap-3 h-100"
      >
        <div class="icon warning">
          <img src="assets/icons/money-tag.svg" alt="" />
        </div>

        <div class="d-flex flex-column gap-1">
          <span>Total Expected Earnings</span>
          <span class="fw-semibold"
            >{{ user.financialSummary.expectedProfits }}
            <img src="assets/icons/Saudi_Riyal_Symbol-d.svg" alt=""
          /></span>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="mt-5">
  <h5 class="card-title text-primary">Transactions Distrubution</h5>
  <div class="p-4 mt-2 bg-white rounded-4">
    <div class="table-responsive">
      <table class="fw-light transactions-table table">
        <thead>
          <tr>
            <th class="text-primary fw-light">Description</th>
            <th class="text-center text-primary fw-light">Ref ID</th>
            <th class="text-center text-primary fw-light">Transaction Type</th>
            <th class="text-center text-primary fw-light">Date</th>
            <th class="text-center text-primary fw-light">Amount</th>
            <th class="text-center text-primary fw-light">Account</th>
            <th class="text-center text-primary fw-light">Details</th>
          </tr>
        </thead>
        <tbody>
          @for (tx of transactions; track tx.id) {
          <tr>
            <td class="align-middle">
              <div
                class="d-flex align-items-center justify-content-start gap-2"
              >
                <div class="arrow-circle">
                  <i
                    class="fas"
                    [ngClass]="{
                      'fa-arrow-down': tx.transactionType === 'Withdrawal',
                      'fa-arrow-up': tx.transactionType !== 'Withdrawal'
                    }"
                  ></i>
                </div>
                <span class="ps-2">{{ tx.description || "-" }}</span>
              </div>
            </td>
            <td class="text-center align-middle">#{{ tx.refId }}</td>
            <td class="text-center align-middle">
              {{ tx.typeLabel }}
            </td>
            <td class="text-center align-middle">
              {{ tx.createDate | date : "medium" }}
            </td>
            <td class="text-center align-middle">
              <span
                [ngClass]="{
                  'text-danger': tx.amount < 0,
                  'text-success': tx.amount > 0
                }"
              >
                {{ tx.amount | number : "1.0-2" }}
                <img src="assets/icons/Saudi_Riyal_Symbol-d.svg" alt="" />
              </span>
            </td>
            <td class="text-center align-middle">
              <span>
                {{ tx.accountLabel }}
              </span>
            </td>
            <td class="justify-content-center">
              <a
                [routerLink]="
                  '/' +
                  WEB_ROUTES.TRANSACTIONS.ROOT +
                  '/' +
                  WEB_ROUTES.TRANSACTIONS.DETAILS +
                  '/' +
                  tx.id
                "
                class="btn btn-outline-primary rounded-5 px-4 py-0"
              >
                view
              </a>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
    <nav
      class="d-flex justify-content-center my-4"
      *ngIf="pagination.totalPages > 1"
    >
      <ngb-pagination
        [(page)]="pagination.currentPage"
        [pageSize]="pagination.pageSize"
        [collectionSize]="pagination.totalCount"
        [maxSize]="5"
        [ellipses]="true"
        (pageChange)="goToPage($event)"
        size="md"
        class="minimal-pagination"
      >
      </ngb-pagination>
    </nav>
  </div>
</section>
