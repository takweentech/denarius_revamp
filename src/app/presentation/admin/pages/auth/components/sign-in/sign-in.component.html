<div class="container d-flex flex-column justify-content-center h-100 align-items-center">
  <h6 class="d-flex gap-2">
    {{ 'AUTHENTICATION.SIGN_IN.NO_ACCOUNT' | translate
    }}<a class="text-primary" [routerLink]="'/' + WEB_ROUTES.AUTH.ROOT + '/' + WEB_ROUTES.AUTH.SIGN_UP">
      {{ 'AUTHENTICATION.SIGN_IN.SIGN_UP' | translate }}</a
    >
  </h6>

  <div class="d-flex cards flex-column align-items-center gap-5 w-100">
    <div class="d-flex flex-column gap-3">
      <h1 class="fw-semibold">{{ 'AUTHENTICATION.SIGN_IN.TITLE' | translate }}</h1>
      <p>{{ 'AUTHENTICATION.SIGN_IN.DESCRIPTION' | translate }}</p>
    </div>
    <!-- Form -->
    @if (mode === signInModes.FORM) {
      <form [formGroup]="form" class="w-100 d-flex flex-column gap-4" (submit)="validateSignIn()">
        <!-- Phone number -->
        <div class="form-group">
          <label class="form-label" for=""> {{ 'AUTHENTICATION.SIGN_IN.PHONE_NUMBER.LABEL' | translate }}</label>

          <div class="input-group">
            @if (translationService.language === 'en') {
              <span class="input-group-text" dir="ltr">+966</span>
            }

            <input
              maxlength="9"
              type="tel"
              class="form-control"
              dir="ltr"
              formControlName="userName"
              placeholder="5xxxxxxxx"
            />

            @if (translationService.language === 'ar') {
              <span class="input-group-text" dir="ltr">+966</span>
            }
          </div>
          @if (form.get('userName')?.errors?.['required'] && form.get('userName')?.touched) {
            <small class="text-danger mt-1 d-flex align-items-center gap-1">
              <i class="fa-solid fa-circle-exclamation"></i>
              {{ 'VALIDATORS.REQUIRED' | translate }}
            </small>
          }
        </div>
        <!-- Password -->
        <div class="d-flex flex-column gap-3">
          <div class="form-group">
            <label class="form-label" for=""> {{ 'AUTHENTICATION.SIGN_IN.PASSWORD.LABEL' | translate }}</label>
            <div class="input-group">
              <input
                type="password"
                #password
                placeholder="{{ 'AUTHENTICATION.SIGN_IN.PASSWORD.PLACEHOLDER' | translate }}"
                formControlName="password"
                class="form-control"
              />
              <span class="input-group-text">
                @if (password.type === 'password') {
                  <i (click)="password.type = 'text'" class="fa-solid fa-eye text-primary cursor-pointer"></i>
                } @else {
                  <i (click)="password.type = 'password'" class="fa-solid fa-eye-slash text-primary cursor-pointer"></i>
                }
              </span>
            </div>

            @if (form.get('password')?.errors?.['required'] && form.get('password')?.touched) {
              <small class="text-danger mt-1 d-flex align-items-center gap-1">
                <i class="fa-solid fa-circle-exclamation"></i>
                {{ 'VALIDATORS.REQUIRED' | translate }}
              </small>
            }
          </div>
          <div class="d-flex justify-content-between">
            <div class="d-flex align-items-center gap-2">
              <input type="checkbox" id="terms" formControlName="rememberMe" class="m-0" />
              <label for="terms" class="form-label mb-0">
                {{ 'AUTHENTICATION.SIGN_IN.REMEMBER_ME' | translate }}
              </label>
            </div>
            <a
              [routerLink]="'/' + WEB_ROUTES.AUTH.ROOT + '/' + WEB_ROUTES.AUTH.FORGOT_PASSWORD.ROOT"
              class="text-primary"
            >
              {{ 'AUTHENTICATION.SIGN_IN.FORGOT_PASSWORD' | translate }}
            </a>
          </div>
        </div>
        <button [disabled]="loading()" class="btn btn-primary p-3">
          {{ 'AUTHENTICATION.SIGN_IN.CTA' | translate }}
        </button>
      </form>
    }
    <!-- OTP -->
    @if (mode === signInModes.OTP) {
      <app-otp [displayResendOtp]="true" (resendOtp)="validateSignIn()" [formGroup]="otpForm"></app-otp>
    }
  </div>
</div>
